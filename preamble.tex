\begin{filecontents*}[overwrite]{\jobname.xmpdata}
\Title{Concrete Algebra}
\Author{Benjamin McKay}
\Language{en-GB}
\Subject{A textbook in undergraduate algebra.}
\Keywords{algebra\sep plane algebraic curves\sep Chinese remainder theorem}
\end{filecontents*}
\documentclass%[ContainsChinese]
{willowtreebook}
\Title{Concrete Algebra}
\Subtitle{With a View Toward Abstract Algebra}
\Author{\texorpdfstring{Benjamin \scotsMc{}Kay}{Benjamin McKay}}
\BibliographyFile{algebra}
\usepackage[UKenglish]{babel}
\usepackage{colorprofiles}
\usepackage[mathxmp]{pdfx}[2018/12/22]
\hypersetup{pdfstartview=}
\usepackage{longdivision}
\usepackage{standalone}
\usepackage{xstring}
\usepackage{amsmath}
\usepackage{mathrsfs}		% the \mathscr command for script fonts
\usepackage{mleftright}		% fixes problems with \left and \right
\usepackage{verbatim}		% For verbatim quotation of programming code.
\usepackage{asymptote}
\usepackage{siunitx}
\usepackage{cool}
\usepackage{tikz}			% TiKZ graphics packages
\usetikzlibrary{%
arrows,
backgrounds,
calc,
decorations.markings,
decorations.pathmorphing,
decorations.pathreplacing,
decorations.shapes,
fit,
intersections,
petri,
positioning,
trees,
through
}
\usepackage{tikz-cd}
\usepackage{pgfplots}
\pgfplotsset{compat=1.14}
\usepgfplotslibrary{fillbetween}
\usepackage{tikz-3dplot}
\usepackage{genyoungtabtikz}
\newlength{\YoungBoxSize}
\setlength{\YoungBoxSize}{10pt}
\Yboxdim{\YoungBoxSize}
\Ylinecolour{gray!75}
%\Ynodecolour{green!50!black}
\Yfillcolour{gray!20}
\NewDocumentCommand\emphYoungBox{}{\Yfillcolour{blue!30}}
\NewDocumentCommand\otherEmphYoungBox{}{\Yfillcolour{red!30}}
\NewDocumentCommand\regYoungBox{}{\Yfillcolour{gray!20}}
\usepackage{stackengine}
\usepackage{tensor}
\NewDocumentCommand\map{mmm}{{#2}\xrightarrow{#1}{#3}}
\DeclarePairedDelimiter\braDelim{\langle}{\rvert}
\DeclarePairedDelimiter\ketDelim{\lvert}{\rangle}
\DeclarePairedDelimiterX\braketDelim[2]{\langle}{\rangle}{#1 \delimsize\vert #2}
\DeclarePairedDelimiter\ringGeneratedBy{[}{]}
\NewDocumentCommand\ringgen{mm}%
{%
#1\ringGeneratedBy{#2}%
}%
\usepackage{epigraph-keys}	% Handles epigraphs at the start of each chapter.
\usepackage{sagetex}
\vrefwarning
\usepackage{morewrites}
\usepackage{bookmark}% http://ctan.org/pkg/bookmark 
%%.....Mathematics Commands
\def\cprime{\('\)} 			% For Russian names

\newcommand*{\defeq}%		% for definitions, A \defeq B means A is defined to be B.
{\mathrel{\vcenter{\baselineskip0.5ex \lineskiplimit0pt
                     \hbox{\scriptsize.}\hbox{\scriptsize.}}}%
                     =}
% I don't like the default \Re and \Im for complex numbers.
\renewcommand{\Re}{\ensuremath{\operatorname{Re}}} 
\renewcommand{\Im}{\ensuremath{\operatorname{Im}}}

% Various sets
\newcommand*{\Z}[1]{\ensuremath{\mathbb{Z}^{#1}}}
\newcommand*{\N}[1]{\ensuremath{\mathbb{N}^{#1}}}
\newcommand*{\R}[1]{\ensuremath{\mathbb{R}^{#1}}}
\newcommand*{\Q}[1]{\ensuremath{\mathbb{Q}^{#1}}}
\newcommand*{\C}[1]{\ensuremath{\mathbb{C}^{#1}}}
\NewDocumentCommand\Zmod{sm}{\ensuremath{\mathbb{Z}\kern -1pt/\kern -1pt{\IfBooleanTF{#1}{\pr{#2}}{#2}}\mathbb{Z}}}

% Brackets
\newcommand*{\pr}[1]{\ensuremath{\left(#1\right)}}
\newcommand*{\curly}[1]{\ensuremath{\left\{#1\right\}}}
\newcommand*{\of}[1]{\ensuremath{\!\pr{#1}}}
\newcommand*{\equalquestion}{\stackrel{?}{=}}

% greatest common divisor
\renewcommand*{\gcd}[1]{\ensuremath{\operatorname{gcd}	\left\{{#1}\right\}}}
\newcommand*{\lcm}[1]{\ensuremath{\operatorname{lcm}\left\{{#1}\right\}}}

\usepackage{calc}


\NewDocumentCommand\integerLongDivision{mm}%
{%
\begingroup%
\lstyle%
\tstyle%
\arrayrulecolor{black}%
\[%
\intlongdivision{#1}{#2}%
\]%
\arrayrulecolor{\defaultArrayRuleColor}%
\endgroup%
}%

%% Two columns proofs:
% Usage:
%\begin{twocolumnproof}
%\pf{0}{0 + 0}[problem~1] \\
%\pf{a \cdot 0}{a \cdot (0 + 0)}[multiplying by \(a\)] \\
%\pf{a \cdot 0}{a \cdot 0 + a \cdot 0}[the distributive law] \\
%\pf{\text{Let } b}{-(a \cdot 0)} \\
%\pf{a \cdot 0 + b}{(a \cdot 0 + a \cdot 0) + b}[adding \(b\) to both sides] \\
%\pf{a \cdot 0 + b}{a \cdot 0 + (a \cdot 0 + b)}[the associative law for addition] \\
%\pf{0}{a \cdot 0 + 0}[the definition of \(b\)] \\
%\lastpf{0}{a \cdot 0}[the definition of \(0\)]
%\end{twocolumnproof}
\NewDocumentEnvironment{twocolumnproof}{}{\csname align*\endcsname}{\csname endalign*\endcsname}
\NewDocumentCommand\mainproofstep{mO{=}mom}{#1&#2#3\IfValueT{#4}{&{\quad}&\text{by #4}}#5}
\NewDocumentCommand\pf{mO{=}mo}{\mainproofstep{#1}[#2]{#3}[#4]{,}}
\NewDocumentCommand\lastpf{mO{=}mo}{\mainproofstep{#1}[#2]{#3}[#4]{.}}


\NewDocumentCommand\cardinality{sm}%
{%
\IfBooleanTF{#1}%
{\tensor[^{\#}]{(#2)}{}}%
{\tensor[^{\#}]{{#2}}{}}%
}%

% Cross out mathematics.
\newcommand\hcancel[2][red]{\setbox0=\hbox{$#2$}%
\rlap{\raisebox{.45\ht0}{\textcolor{#1}{\rule{\wd0}{1pt}}}}#2} 


% \congmod[p]{b}{c} means b=c (mod p).
\NewDocumentCommand\congmod{omm}{\IfValueTF{#1}{#2 \equiv #3 \pmod{#1}}{#2 \equiv #3}}

%% Projective space: \Proj^n, \Proj_k, \Proj^n_k, \Proj(V), \Proj^n(k)
\NewDocumentCommand\Proj{e^e_d()}{%
\IfNoValueTF{#1}{\IfNoValueTF{#2}{\mathbb{P}}{\mathbb{P}_{\!#2}}}%
{\IfNoValueTF{#2}{\mathbb{P}^{#1}}{\mathbb{P}^{#1}_{\!#2}}}%
\IfValueTF{#3}{#3}{}%
}%

\newcommand{\resultant}[2]{%
\ensuremath{\operatorname{res}_{#1,#2}}
}%

\newcommand{\discriminant}[1]{%
\ensuremath{\Delta_{#1}}
}%

\RenewDocumentCommand\dim{sm}{%
\IfBooleanTF{#1}{%
\operatorname{dim}\left(#2\right)}{%
\operatorname{dim} #2}%
}%

\newcommand*{\tr}[1]{\operatorname{tr} #1}

\newcommand*{\degree}[1]{\operatorname{deg} #1}

\setstackgap{L}{.7\baselineskip}

\newcommand*{\multiplicity}[3]%\multiplicity{point}{curve}{curve}
{\ensuremath{#2#3_{#1}}}

\newcommand*{\order}[2]%\order{point}{curve}
{\ensuremath{{#2}_{#1}}}

\newcommand*{\intersectionnumber}[2]%\intersectionnumber{curve}{curve}
{\ensuremath{#1#2}}

\NewDocumentCommand\Gal{mm}{\operatorname{Aut}{#2/#1}}

\newcounter{squareBoxCounter}


% quaternions
\newcommand*{\Quat}[1]{\ensuremath{\mathbb{H}^{#1}}}

% octonions
\newcommand*{\Oct}[1]{\ensuremath{\mathbb{O}^{#1}}}

\newcommand*{\ii}{\ensuremath{\iota}}

\NewDocumentCommand\Hessian{m}{\ensuremath{\det #1''}}

\NewDocumentCommand\pres{mo}{\ensuremath{\IfValueTF{#2}{\braketDelim{#1}{#2}}{\left<#1\right>}}}

\NewDocumentCommand\Gr{mo}{\ensuremath{\operatorname{Gr}_{#1}\IfValueT{#2}{\!{#2}}}}
\NewDocumentCommand\GL{m}{\ensuremath{\operatorname{GL}_{#1}}}

\NewDocumentCommand\adj{sm}{\ensuremath{\operatorname{adj}\IfBooleanTF{#1}{\left(#2\right)}{#2}}}

% coefficients of polynomials and Taylor series
\NewDocumentCommand\coef{m}{\ensuremath{\left.#1\right|}}

% \cev{x} for backwards vector symbol
\makeatletter
\DeclareRobustCommand{\cev}[1]{%
  {\mathpalette\do@cev{#1}}%
}
\newcommand{\do@cev}[2]{%
  \vbox{\offinterlineskip
    \sbox\z@{$\m@th#1 x$}%
    \ialign{##\cr
      \hidewidth\reflectbox{$\m@th#1\vec{}\mkern4mu$}\hidewidth\cr
      \noalign{\kern-\ht\z@}
      $\m@th#1#2$\cr
    }%
  }%
}
\makeatother

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% This code is a slight modification of Hendrik Vogt's \widebar %%
%% See: https://tex.stackexchange.com/questions/16337            %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\makeatletter
\let\save@mathaccent\mathaccent
\newcommand*\if@single[3]{%
  \setbox0\hbox{${\mathaccent"0362{#1}}^H$}%
  \setbox2\hbox{${\mathaccent"0362{\kern0pt#1}}^H$}%
  \ifdim\ht0=\ht2 #3\else #2\fi
  }
%The bar will be moved to the right by a half of \macc@kerna, which is computed by amsmath:
\newcommand*\rel@kern[1]{\kern#1\dimexpr\macc@kerna}
%If there's a superscript following the bar, then no negative kern may follow the bar;
%an additional {} makes sure that the superscript is high enough in this case:
\newcommand*\wideaccent[2]{\@ifnextchar^{{\wide@accent{#1}{#2}{0}}}{\wide@accent{#1}{#2}{1}}}
%Use a separate algorithm for single symbols:
\newcommand*\wide@accent[3]{\if@single{#2}{\wide@accent@{#1}{#2}{#3}{1}}{\wide@accent@{#1}{#2}{#3}{2}}}
\newcommand*\wide@accent@[4]{%
  \begingroup
  \def\mathaccent##1##2{%
%Enable nesting of accents:
    \let\mathaccent\save@mathaccent
%If there's more than a single symbol, use the first character instead (see below):
    \if#42 \let\macc@nucleus\first@char \fi
%Determine the italic correction:
    \setbox\z@\hbox{$\macc@style{\macc@nucleus}_{}$}%
    \setbox\tw@\hbox{$\macc@style{\macc@nucleus}{}_{}$}%
    \dimen@\wd\tw@
    \advance\dimen@-\wd\z@
%Now \dimen@ is the italic correction of the symbol.
    \divide\dimen@ 3
    \@tempdima\wd\tw@
    \advance\@tempdima-\scriptspace
%Now \@tempdima is the width of the symbol.
    \divide\@tempdima 10
    \advance\dimen@-\@tempdima
%Now \dimen@ = (italic correction / 3) - (Breite / 10)
    \ifdim\dimen@>\z@ \dimen@0pt\fi
%The bar will be shortened in the case \dimen@<0 !
    \rel@kern{0.6}\kern-\dimen@
    \if#41
      #1{\rel@kern{-0.6}\kern\dimen@\macc@nucleus\rel@kern{0.4}\kern\dimen@}%
      \advance\dimen@0.4\dimexpr\macc@kerna
%Place the combined final kern (-\dimen@) if it is >0 or if a superscript follows:
      \let\final@kern#3%
      \ifdim\dimen@<\z@ \let\final@kern1\fi
      \if\final@kern1 \kern-\dimen@\fi
    \else
      #1{\rel@kern{-0.6}\kern\dimen@#2}%
    \fi
  }%
  \macc@depth\@ne
  \let\math@bgroup\@empty \let\math@egroup\macc@set@skewchar
  \mathsurround\z@ \frozen@everymath{\mathgroup\macc@group\relax}%
  \macc@set@skewchar\relax
  \let\mathaccentV\macc@nested@a
%The following initialises \macc@kerna and calls \mathaccent:
  \if#41
    \macc@nested@a\relax111{#2}%
  \else
%If the argument consists of more than one symbol, and if the first token is
%a letter, use that letter for the computations:
    \def\gobble@till@marker##1\endmarker{}%
    \futurelet\first@char\gobble@till@marker#2\endmarker
    \ifcat\noexpand\first@char A\else
      \def\first@char{}%
    \fi
    \macc@nested@a\relax111{\first@char}%
  \fi
  \endgroup
}
\makeatother
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand\doubleoverline[1]{\overline{\overline{#1}}}

\newcommand\widebar{\wideaccent\overline}
\newcommand\widebarbar{\wideaccent\doubleoverline}

\input{colorScheme}

